<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Economics Essay Planning Game</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    h2 { color: #003366; }
    .question-box { margin-bottom: 20px; }
    .options button { display: block; margin: 5px 0; padding: 8px; width: 100%; }
    .feedback { font-weight: bold; margin-top: 10px; }
    .next-btn { 
      margin-top: 20px; 
      padding: 10px 20px;
      background-color: #003366;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: none; /* Initially hidden */
    }
  </style>
</head>
<body>

<h2>Economics 25-Mark Question Planner</h2>
<div id="game">
  <div class="question-box" id="questionBox"></div>
  <div class="options" id="optionsBox"></div>
  <div class="feedback" id="feedback"></div>
  <button class="next-btn" id="nextBtn">Next Question</button>
</div>

<script>
const questions = [
  {
    "question": "Supply-side policies for UK growth?",
    "forPoints": [
      "LRAS shift ",
      "Lower natural rate of unemployment ",
      "Attract FDI"
    ],
    "against": "May worsen inequality",
    "diagram": "PPF",
    "conclude": "Effective if paired with training SR: costs (austerity)"
  },
  {
    "question": "Pound depreciation impact",
    "forPoints": [
      "Export boost ",
      "Tourism growth ",
      "Import substitution"
    ],
    "against": "Imported inflation",
    "diagram": "AD/AS (cost-push)",
    "conclude": "Benefit (X-M) SR: J-curve effect (SRAS↑) LR: Competitiveness"
  },
  {
    "question": "Economic growth benefits?",
    "forPoints": [
      "Higher living standards ",
      "Tax revenue↑ ",
      "Employment↑"
    ],
    "against": "Environmental damage",
    "diagram": "LRAS",
    "conclude": "Beneficial if sustainable SR: Consumption↑. LR: Climate costs"
  },
  {
    "question": "Full employment as main goal?",
    "forPoints": [
      "Maximize PPF ",
      "Social benefits ",
      "Fiscal benefit, Budget deficit↓ "
  ],
    "against": "Demand-pull inflation risk",
    "diagram": "Phillips Curve",
    "conclude": "Secondary to price stability SR: AD↑. LR: Structural bottlenecks"
  },
  {
    "question": "Interest rate rise impact",
    "forPoints": [
      "Inflation control ",
      "Strengthen £ ",
      "Encourage saving"
    ],
    "against": "Investment decline",
    "diagram": "AD/AS",
    "conclude": "Necessary if inflation > target SR: AD↓. LR: Stability"
  },
  {
    "question": "Fiscal policy for inequality?",
    "forPoints": [
      "Progressive taxes ",
      "Welfare payments ",
      "Public services"
    ],
    "against": "Work disincentives",
    "diagram": "Lorenz Curve",
    "conclude": "Effective but costly SR: Redistribution. LR: Dependency"
  },
  {
    "question": "Monetary policy for AD?",
    "forPoints": [
      "Quick transmission ",
      "BoE independence ",
      "Flexible rates"
    ],
    "against": "Liquidity trap risk",
    "diagram": "AD/AS + LRAS",
    "conclude": "Effective unless zero lower bound SR: Consumption↑. LR: excess borrowing, price bubbles"
  },
  {
    "question": "Globalisation impact",
    "forPoints": [
      "Lower prices ",
      "Specialisation ",
      "FDI benefits"
    ],
    "against": "Structural unemployment, deindustrialisation",
    "diagram": "Trade diagram",
    "conclude": "Net benefit,  consumer surplus, trade levels higher  SR: Job losses. LR: Efficiency↑"
  },
  {
    "question": "Budget deficit problems?",
    "forPoints": [
      "Crowding out ",
      "Debt burden ",
      "Interest costs"
    ],
    "against": "Recession necessity",
    "diagram": "AD/AS output gap",
    "conclude": "Problematic if >3% GDP SR: Stimulus. LR: Debt servicing"
  },
  {
    "question": "Supply-side policies for unemployment",
    "forPoints": [
      "Reduce structural ",
      "Skills matching ",
      "Mobility↑"
    ],
    "against": "Time lags",
    "diagram": "LRAS",
    "conclude": "Best for long-term SR: Costs. LR: Productivity↑"
  },
  {
    "question": "Ageing population impact",
    "forPoints": [
      "Pension costs↑ ",
      "Labour shortages ",
      "Healthcare demand↑"
    ],
    "against": "Silver economy",
    "diagram": "LRAS",
    "conclude": "Requires reform SR: Fiscal drag. LR: Automation"
  },
  {
    "question": "Current account deficit?",
    "forPoints": [
      "FDI covers ",
      "Consumer Surplus↑ ",
      "Strong £ signal"
    ],
    "against": "X<M leakage, budget deficit",
    "diagram": "AD/AS",
    "conclude": "Manageable if FDI↑ SR: Sustainable. LR: Vulnerability"
  },
  {
    "question": "Productivity as growth key?",
    "forPoints": [
      "Wages↑ ",
      "Competitiveness ",
      "Inflation control"
    ],
    "against": "Job displacement",
    "diagram": "PPF",
    "conclude": "Necessary not sufficient SR: Unemployment. LR: Living standards↑"
  },
  {
    "question": "Government spending impact",
    "forPoints": [
      "AD stimulus ",
      "Multiplier ",
      "Public goods"
    ],
    "against": "Crowding out",
    "diagram": "AD/AS",
    "conclude": "Effective in recessions SR: Growth↑. LR: Debt↑"
  },
  {
    "question": "Inequality vs growth",
    "forPoints": [
      "Talent waste ",
      "Social unrest ",
      "AD constraint"
    ],
    "against": "Incentive effect",
    "diagram": "Lorenz Curve",
    "conclude": "Harms inclusive growth SR: Poverty↓. LR: Innovation?"
  },
  {
    "question": "FDI in developing nations",
    "forPoints": [
      "Tech transfer ",
      "Jobs ",
      "Infrastructure"
    ],
    "against": "Exploitation",
    "diagram": "PPF",
    "conclude": "Benefits with regulation SR: Sweatshops. LR: Industrialization"
  },
  {
    "question": "Fiscal policy effectiveness",
    "forPoints": [
      "Targeted ",
      "Automatic stabilizers ",
      "Direct AD"
    ],
    "against": "Time lags",
    "diagram": "AD/AS",
    "conclude": "Crisis tool SR: Quick. LR: Rigidities"
  },
  {
    "question": "Growth vs environment",
    "forPoints": [
      "Pollution ",
      "Resource depletion ",
      "Climate costs"
    ],
    "against": "Green growth",
    "diagram": "Negative externality",
    "conclude": "Must decouple SR: Damage. LR: Tech fixes"
  },
  {
    "question": "Corporation tax changes",
    "forPoints": [
      "FDI↑ ",
      "Investment↑ ",
      "Growth↑"
    ],
    "against": "Revenue loss",
    "diagram": "Laffer Curve",
    "conclude": "Optimal 18-21% SR: Buybacks. LR: Capacity↑"
  },
  {
    "question": "Monetary policy for inflation",
    "forPoints": [
      "Rate transmission ",
      "Quick ",
      "Demand control"
    ],
    "against": "Cost-push limits",
    "diagram": "AD/AS",
    "conclude": "Works unless supply shock SR: AD↓. LR: Stability"
  },
  {
    "question": "Inequality vs mobility",
    "forPoints": [
      "Education gaps ",
      "Poverty traps ",
      "Opportunity loss"
    ],
    "against": "Meritocracy",
    "diagram": "Lorenz Curve",
    "conclude": "Significant barrier SR: Welfare. LR: Talent loss"
  }
];

const againstPool = ["Liquidity trap risk", "Demand-pull inflation risk", "Meritocracy", "Environmental damage", "Cost-push limits"];
const concludePool = ["Secondary to price stability SR: AD↑. LR: Structural bottlenecks", "Effective unless zero lower bound SR: Consumption↑. LR: Debt bubbles", "Must decouple SR: Damage. LR: Tech fixes", "Necessary not sufficient SR: Unemployment. LR: Living standards↑", "Significant barrier SR: Welfare. LR: Talent loss"];


let current = 0;
let playerAnswers = {};
let totalScore = 0;
let maxScore = 0;

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function renderQuestion() {
  const q = questions[current];
  playerAnswers = { for: [], against: "", diagram: "", conclude: "" };
  document.getElementById("feedback").textContent = "";
  document.getElementById("nextBtn").style.display = "none";

  document.getElementById("questionBox").innerHTML = `<h3>Q${current + 1}: ${q.question}</h3><p>Select 3 'For' points:</p>`;

  let allFor = [...q.forPoints];
  while (allFor.length < 5) {
    const randomQ = questions[Math.floor(Math.random() * questions.length)];
    const point = randomQ.forPoints[Math.floor(Math.random() * randomQ.forPoints.length)];
    if (!allFor.includes(point)) allFor.push(point);
  }

  const forButtons = shuffle(allFor.map(p => `<button data-type="for" data-value="${p}">${p}</button>`)).join('');
  const againstButtons = shuffle([...new Set([q.against, ...againstPool])].slice(0,5)
    .map(a => `<button data-type="against" data-value="${a}">${a}</button>`)).join('');
  const diagramButtons = shuffle([...new Set([q.diagram, ...["Laffer Curve", "AD/AS Demand", "SRAS", "AD/AS (cost-push)", "Negative externality"]])].slice(0,5).map(d => `<button data-type="diagram" data-value="${d}">${d}</button>`)).join('');
  const concludeButtons = shuffle([...new Set([q.conclude, ...concludePool])].slice(0,5)
    .map(c => `<button data-type="conclude" data-value="${c}">${c}</button>`)).join('');

  document.getElementById("optionsBox").innerHTML =
    `<div>${forButtons}</div><hr>
    <p>Select the 'Against' point:</p><div>${againstButtons}</div><hr>
    <p>Select the correct diagram:</p><div>${diagramButtons}</div><hr>
    <p>Select the conclusion:</p><div>${concludeButtons}</div>`;

  document.querySelectorAll("#optionsBox button").forEach(btn => {
    btn.addEventListener("click", function() {
      const type = this.dataset.type;
      const value = this.dataset.value;

      if (type === "for") {
        if (playerAnswers.for.includes(value)) {
          playerAnswers.for = playerAnswers.for.filter(v => v !== value);
          this.style.backgroundColor = "";
        } else if (playerAnswers.for.length < 3) {
          playerAnswers.for.push(value);
          this.style.backgroundColor = "#cceeff";
        }
      } else {
        if (playerAnswers[type] === value) {
          playerAnswers[type] = "";
          this.style.backgroundColor = "";
        } else {
          const prevSelected = document.querySelector(`button[data-type="${type}"][style*="background-color"]`);
          if (prevSelected) prevSelected.style.backgroundColor = "";
          playerAnswers[type] = value;
          this.style.backgroundColor = "#cceeff";
        }
      }

      if (playerAnswers.for.length === 3 && 
          playerAnswers.against && 
          playerAnswers.diagram && 
          playerAnswers.conclude) {
        checkAnswer();
      }
    });
  });
}

function checkAnswer() {
  const q = questions[current];
  let score = 0;

  const forCorrect = q.forPoints.every(p => playerAnswers.for.includes(p)) && playerAnswers.for.length === 3;

  document.querySelectorAll("#optionsBox button").forEach(btn => {
    const type = btn.dataset.type;
    const val = btn.dataset.value;

    if (type === "for") {
      if (q.forPoints.includes(val)) {
        if (playerAnswers.for.includes(val)) {
          btn.style.backgroundColor = "#b6e7a6";
        } else {
          btn.style.border = "2px dashed green";
        }
      } else if (playerAnswers.for.includes(val)) {
        btn.style.backgroundColor = "#f8b6b6";
      }
    } else {
      const correctValue = q[type];
      if (val === correctValue) {
        if (playerAnswers[type] === val) {
          btn.style.backgroundColor = "#b6e7a6";
        } else {
          btn.style.border = "2px dashed green";
        }
      } else if (playerAnswers[type] === val) {
        btn.style.backgroundColor = "#f8b6b6";
      }
    }
  });

  if (forCorrect) score += 1;
  if (playerAnswers.against === q.against) score += 1;
  if (playerAnswers.diagram === q.diagram) score += 1;
  if (playerAnswers.conclude === q.conclude) score += 1;

  totalScore += score;
  maxScore += 4;

  document.getElementById("feedback").textContent = `You got ${score}/4 correct.`;
  document.getElementById("nextBtn").style.display = "block";
}

function nextQuestion() {
  current++;
  if (current >= questions.length) {
    const percent = Math.round((totalScore / maxScore) * 100);
    document.getElementById("game").innerHTML = `
      <h3>Well done! You've completed the game.</h3>
      <p>Your total score: <strong>${totalScore} / ${maxScore}</strong> (${percent}%)</p>
      <p>${percent >= 80 ? "Excellent work!" : percent >= 60 ? "Nice effort!" : "Keep practicing!"}</p>
    `;
    return;
  }
  renderQuestion();
}

// Initialize
document.getElementById("nextBtn").addEventListener("click", nextQuestion);
renderQuestion();
</script>
</body>
</html>